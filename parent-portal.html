<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parent Portal - King Solomon Junior School</title>
    
    <!-- Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="css/modern-enhancements.css">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary: #10b981;
            --primary-dark: #059669;
            --secondary: #14b8a6;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --text-dark: #1e293b;
            --text-gray: #64748b;
            --border: #e2e8f0;
        }

        body.dark-mode {
            --bg-light: #0f172a;
            --bg-white: #1e293b;
            --text-dark: #f1f5f9;
            --text-gray: #cbd5e1;
            --border: #334155;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .top-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 25px 30px;
            border-radius: 16px;
            margin-bottom: 30px;
            box-shadow: 0 8px 30px rgba(16, 185, 129, 0.3);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header-left h1 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .header-left p {
            opacity: 0.9;
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .notification-btn {
            position: relative;
            background: rgba(255,255,255,0.2);
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .notification-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        /* Child Selector */
        .child-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .child-card {
            min-width: 200px;
            background: white;
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        body.dark-mode .child-card {
            background: var(--bg-white);
        }

        .child-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .child-card.active {
            border-color: var(--primary);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.2);
        }

        .child-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 auto 15px;
        }

        .child-name {
            text-align: center;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .child-class {
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-gray);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s ease;
        }

        body.dark-mode .stat-card {
            background: var(--bg-white);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }

        .stat-icon {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            color: var(--text-gray);
            font-size: 0.9rem;
        }

        /* Charts */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        body.dark-mode .chart-card {
            background: var(--bg-white);
        }

        .chart-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Fee Payment Widget */
        .fee-widget {
            background: linear-gradient(135deg, #10b981, #14b8a6);
            color: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 30px rgba(16, 185, 129, 0.3);
        }

        .fee-amount {
            font-size: 3rem;
            font-weight: 700;
            margin: 15px 0;
        }

        .pay-btn {
            background: white;
            color: var(--primary);
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            font-size: 1.1rem;
        }

        .pay-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255,255,255,0.3);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 2px solid var(--border);
        }

        .tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-gray);
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab:hover {
            color: var(--primary);
        }

        /* Modern List */
        .modern-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .list-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            border-left: 4px solid var(--primary);
        }

        body.dark-mode .list-item {
            background: var(--bg-white);
        }

        .list-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        @media (max-width: 768px) {
            .stats-grid, .charts-grid {
                grid-template-columns: 1fr;
            }
            .child-selector {
                flex-direction: column;
            }
            .child-card {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Top Header -->
        <div class="top-header" data-aos="fade-down">
            <div class="header-content">
                <div class="header-left">
                    <h1>üë®‚Äçüë©‚Äçüëß Parent Portal</h1>
                    <p>Welcome back! Monitor your children's progress</p>
                </div>
                <div class="header-actions">
                    <button class="notification-btn" onclick="showNotifications()">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">2</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Child Selector -->
        <div class="child-selector" data-aos="fade-up">
            <div class="child-card active" onclick="selectChild(1, 'John Smith', 'STD 8A')">
                <div class="child-avatar">JS</div>
                <div class="child-name">John Smith</div>
                <div class="child-class">STD 8 - Stream A</div>
            </div>
            <div class="child-card" onclick="selectChild(2, 'Sarah Smith', 'STD 6B')">
                <div class="child-avatar">SS</div>
                <div class="child-name">Sarah Smith</div>
                <div class="child-class">STD 6 - Stream B</div>
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card" data-aos="zoom-in">
                <div class="stat-icon" style="background: linear-gradient(135deg, #10b981, #14b8a6);">
                    üìä
                </div>
                <div>
                    <div class="stat-value">A-</div>
                    <div class="stat-label">Average Grade</div>
                </div>
            </div>

            <div class="stat-card" data-aos="zoom-in" data-aos-delay="100">
                <div class="stat-icon" style="background: linear-gradient(135deg, #0891b2, #0e7490);">
                    ‚úÖ
                </div>
                <div>
                    <div class="stat-value">96%</div>
                    <div class="stat-label">Attendance</div>
                </div>
            </div>

            <div class="stat-card" data-aos="zoom-in" data-aos-delay="200">
                <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                    üí∞
                </div>
                <div>
                    <div class="stat-value">5,000</div>
                    <div class="stat-label">Pending Fees (KES)</div>
                </div>
            </div>

            <div class="stat-card" data-aos="zoom-in" data-aos-delay="300">
                <div class="stat-icon" style="background: linear-gradient(135deg, #dc2626, #b91c1c);">
                    üìù
                </div>
                <div>
                    <div class="stat-value">2</div>
                    <div class="stat-label">Pending Assignments</div>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="tabs" data-aos="fade-up">
            <button class="tab active" onclick="showTab('overview')">
                <i class="fas fa-home"></i> Overview
            </button>
            <button class="tab" onclick="showTab('performance')">
                <i class="fas fa-chart-line"></i> Performance
            </button>
            <button class="tab" onclick="showTab('attendance')">
                <i class="fas fa-calendar-check"></i> Attendance
            </button>
            <button class="tab" onclick="showTab('assignments')">
                <i class="fas fa-tasks"></i> Assignments
            </button>
            <button class="tab" onclick="showTab('fees')">
                <i class="fas fa-money-bill"></i> Fees
            </button>
            <button class="tab" onclick="showTab('communication')">
                <i class="fas fa-comments"></i> Communication
            </button>
            <button class="tab" onclick="showTab('reports')">
                <i class="fas fa-file-alt"></i> Reports
            </button>
        </div>

        <!-- Tab Content -->
        <div id="tabContent">
            <!-- Overview Tab -->
            <div class="tab-content active" id="overview-tab">
                <div class="charts-grid">
                    <div class="chart-card" data-aos="fade-up">
                        <h3 class="chart-title">
                            <i class="fas fa-chart-line"></i>
                            Performance Comparison
                        </h3>
                        <div style="height: 300px;">
                            <canvas id="childComparisonChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card" data-aos="fade-up" data-aos-delay="100">
                        <h3 class="chart-title">
                            <i class="fas fa-chart-pie"></i>
                            Attendance Overview
                        </h3>
                        <div style="height: 300px;">
                            <canvas id="attendanceOverviewChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="chart-card" data-aos="fade-up">
                    <h3 class="chart-title">
                        <i class="fas fa-clock"></i>
                        Recent Activity
                    </h3>
                    <div class="modern-list">
                        <div class="list-item">
                            <strong>John Smith - New Result Posted</strong>
                            <p style="color: var(--text-gray); margin: 5px 0;">Mathematics Mid-Term: A (92%)</p>
                            <small style="color: var(--text-gray);">2 hours ago</small>
                        </div>
                        <div class="list-item">
                            <strong>Sarah Smith - Assignment Submitted</strong>
                            <p style="color: var(--text-gray); margin: 5px 0;">Science Project successfully submitted</p>
                            <small style="color: var(--text-gray);">1 day ago</small>
                        </div>
                        <div class="list-item">
                            <strong>Fee Payment Received</strong>
                            <p style="color: var(--text-gray); margin: 5px 0;">Payment of KES 10,000 processed</p>
                            <small style="color: var(--text-gray);">3 days ago</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Tab -->
            <div class="tab-content" id="performance-tab" style="display: none;">
                <div class="charts-grid">
                    <div class="chart-card">
                        <h3 class="chart-title">
                            <i class="fas fa-chart-bar"></i>
                            Subject Performance
                        </h3>
                        <div style="height: 300px;">
                            <canvas id="subjectPerformanceChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card">
                        <h3 class="chart-title">
                            <i class="fas fa-bullseye"></i>
                            Performance Radar
                        </h3>
                        <div style="height: 300px;">
                            <canvas id="radarChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Attendance Tab -->
            <div class="tab-content" id="attendance-tab" style="display: none;">
                <div class="stats-grid">
                    <div class="stat-card" data-aos="zoom-in">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #059669, #047857);">
                            ‚úÖ
                        </div>
                        <div>
                            <div class="stat-value">98%</div>
                            <div class="stat-label">John's Attendance</div>
                        </div>
                    </div>
                    <div class="stat-card" data-aos="zoom-in" data-aos-delay="100">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #0891b2, #0e7490);">
                            ‚úÖ
                        </div>
                        <div>
                            <div class="stat-value">95%</div>
                            <div class="stat-label">Sarah's Attendance</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-card" data-aos="fade-up" style="margin-top: 30px;">
                    <h3 class="chart-title">
                        <i class="fas fa-calendar-check"></i>
                        Attendance Comparison
                    </h3>
                    <div style="height: 300px;">
                        <canvas id="attendanceComparisonChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-card" data-aos="fade-up" style="margin-top: 30px;">
                    <h3 class="chart-title">
                        <i class="fas fa-list"></i>
                        Recent Attendance Records
                    </h3>
                    <table class="modern-table">
                        <thead>
                            <tr>
                                <th>Child</th>
                                <th>Date</th>
                                <th>Subject</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>John Smith</strong></td>
                                <td>Oct 4, 2025</td>
                                <td>Mathematics</td>
                                <td><span class="badge-modern badge-success"><i class="fas fa-check"></i> Present</span></td>
                            </tr>
                            <tr>
                                <td><strong>John Smith</strong></td>
                                <td>Oct 4, 2025</td>
                                <td>Science</td>
                                <td><span class="badge-modern badge-success"><i class="fas fa-check"></i> Present</span></td>
                            </tr>
                            <tr>
                                <td><strong>Sarah Smith</strong></td>
                                <td>Oct 4, 2025</td>
                                <td>English</td>
                                <td><span class="badge-modern badge-success"><i class="fas fa-check"></i> Present</span></td>
                            </tr>
                            <tr>
                                <td><strong>Sarah Smith</strong></td>
                                <td>Oct 3, 2025</td>
                                <td>Mathematics</td>
                                <td><span class="badge-modern badge-danger"><i class="fas fa-times"></i> Absent</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Assignments Tab -->
            <div class="tab-content" id="assignments-tab" style="display: none;">
                <div class="chart-card" data-aos="fade-up">
                    <h3 class="chart-title">
                        <i class="fas fa-tasks"></i>
                        Children's Assignments
                    </h3>
                    
                    <div class="modern-list">
                        <div class="list-item" style="border-left-color: #f59e0b;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div>
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                        <span style="background: #667eea; color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.85rem; font-weight: 600;">John Smith</span>
                                        <span class="badge-modern badge-warning">
                                            <i class="fas fa-clock"></i> Due Tomorrow
                                        </span>
                                    </div>
                                    <strong style="font-size: 1.1rem;">Mathematics - Chapter 5 Exercises</strong>
                                    <p style="color: var(--text-gray); margin: 5px 0;">Complete exercises 1-20 from textbook</p>
                                    <small style="color: var(--text-gray);">Teacher: Mrs. Johnson | Due: Oct 5, 2025 8:00 AM</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="list-item" style="border-left-color: #059669;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div>
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                        <span style="background: #10b981; color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.85rem; font-weight: 600;">Sarah Smith</span>
                                        <span class="badge-modern badge-success">
                                            <i class="fas fa-check"></i> Submitted
                                        </span>
                                    </div>
                                    <strong style="font-size: 1.1rem;">Science - Plant Growth Project</strong>
                                    <p style="color: var(--text-gray); margin: 5px 0;">Document observations and submit report</p>
                                    <small style="color: var(--text-gray);">Teacher: Mr. Davis | Submitted: Oct 3, 2025</small>
                                    <div style="margin-top: 10px;">
                                        <strong style="color: #059669;">Score: 95% (A)</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="list-item" style="border-left-color: #0891b2;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div>
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                        <span style="background: #667eea; color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.85rem; font-weight: 600;">John Smith</span>
                                        <span class="badge-modern badge-info">
                                            <i class="fas fa-calendar"></i> Due in 5 days
                                        </span>
                                    </div>
                                    <strong style="font-size: 1.1rem;">English - Book Review</strong>
                                    <p style="color: var(--text-gray); margin: 5px 0;">Write a review of your favorite book</p>
                                    <small style="color: var(--text-gray);">Teacher: Ms. Williams | Due: Oct 9, 2025</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fees Tab -->
            <div class="tab-content" id="fees-tab" style="display: none;">
                <div class="fee-widget" data-aos="zoom-in">
                    <h3 style="font-size: 1.3rem; margin-bottom: 10px;">Total Pending Fees</h3>
                    <div class="fee-amount">KES 15,000</div>
                    <p style="opacity: 0.9; margin-bottom: 20px;">For both children - Due: October 15, 2025</p>
                    <button class="pay-btn" onclick="makePayment()">
                        <i class="fas fa-credit-card"></i> Pay Now
                    </button>
                </div>

                <div class="chart-card" style="margin-top: 30px;" data-aos="fade-up">
                    <h3 class="chart-title">
                        <i class="fas fa-chart-line"></i>
                        Payment History
                    </h3>
                    <div style="height: 250px;">
                        <canvas id="paymentHistoryChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Communication Tab -->
            <div class="tab-content" id="communication-tab" style="display: none;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px;">
                    <button class="btn-enhanced" style="background: var(--primary); color: white; padding: 20px; display: flex; flex-direction: column; align-items: center; gap: 10px;" onclick="composeMessage()">
                        <i class="fas fa-pen" style="font-size: 2rem;"></i>
                        <span>New Message</span>
                    </button>
                    <button class="btn-enhanced" style="background: #0891b2; color: white; padding: 20px; display: flex; flex-direction: column; align-items: center; gap: 10px;" onclick="requestMeeting()">
                        <i class="fas fa-calendar-plus" style="font-size: 2rem;"></i>
                        <span>Request Meeting</span>
                    </button>
                    <button class="btn-enhanced" style="background: #8b5cf6; color: white; padding: 20px; display: flex; flex-direction: column; align-items: center; gap: 10px;" onclick="viewTeachers()">
                        <i class="fas fa-chalkboard-teacher" style="font-size: 2rem;"></i>
                        <span>View Teachers</span>
                    </button>
                </div>
                
                <div class="chart-card" data-aos="fade-up">
                    <h3 class="chart-title">
                        <i class="fas fa-envelope"></i>
                        Recent Messages
                    </h3>
                    <div class="modern-list">
                        <div class="list-item" onclick="viewMessageDetail(1)" style="cursor: pointer;">
                            <div style="display: flex; gap: 15px; align-items: start;">
                                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">
                                    MJ
                                </div>
                                <div style="flex: 1;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <strong>Mrs. Johnson</strong>
                                <span style="color: var(--text-gray); font-size: 0.85rem;">2 days ago</span>
                            </div>
                                    <small style="color: var(--text-gray);">Mathematics Teacher - About John</small>
                                    <p style="color: var(--text-gray); margin: 5px 0;">John is showing excellent progress in mathematics. His recent exam score of 92% demonstrates...</p>
                        </div>
                                <span class="notification-badge" style="position: static;">New</span>
                    </div>
                        </div>
                        
                        <div class="list-item" onclick="viewMessageDetail(2)" style="cursor: pointer; opacity: 0.7;">
                            <div style="display: flex; gap: 15px; align-items: start;">
                                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #0891b2, #0e7490); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">
                                    MD
                                </div>
                                <div style="flex: 1;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <strong>Mr. Davis</strong>
                                        <span style="color: var(--text-gray); font-size: 0.85rem;">5 days ago</span>
                                    </div>
                                    <small style="color: var(--text-gray);">Science Teacher - About Sarah</small>
                                    <p style="color: var(--text-gray); margin: 5px 0;">Sarah's science project was exceptional. She demonstrated great understanding of...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-card" data-aos="fade-up" style="margin-top: 30px;">
                    <h3 class="chart-title">
                        <i class="fas fa-handshake"></i>
                        Upcoming Meetings
                    </h3>
                    <div class="modern-list">
                        <div class="list-item">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <strong>Parent-Teacher Conference</strong>
                                    <p style="color: var(--text-gray); margin: 5px 0;">Mrs. Johnson - Mathematics</p>
                                    <small style="color: var(--text-gray);">üìÖ Oct 10, 2025 at 2:00 PM | üìç Room 201</small>
                                </div>
                                <span class="badge-modern badge-info">
                                    <i class="fas fa-calendar"></i> Scheduled
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Tab -->
            <div class="tab-content" id="reports-tab" style="display: none;">
                <div class="chart-card" data-aos="fade-up">
                    <h3 class="chart-title">
                        <i class="fas fa-file-alt"></i>
                        Generate Reports
                    </h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div class="list-item" onclick="generateReport('progress')" style="cursor: pointer; text-align: center;">
                            <i class="fas fa-chart-line" style="font-size: 3rem; color: var(--primary); margin-bottom: 15px; display: block;"></i>
                            <strong style="display: block; margin-bottom: 5px;">Progress Report</strong>
                            <p style="color: var(--text-gray); font-size: 0.9rem;">Comprehensive academic progress report</p>
                        </div>
                        <div class="list-item" onclick="generateReport('attendance')" style="cursor: pointer; text-align: center;">
                            <i class="fas fa-calendar-check" style="font-size: 3rem; color: #059669; margin-bottom: 15px; display: block;"></i>
                            <strong style="display: block; margin-bottom: 5px;">Attendance Report</strong>
                            <p style="color: var(--text-gray); font-size: 0.9rem;">Detailed attendance summary</p>
                        </div>
                        <div class="list-item" onclick="generateReport('financial')" style="cursor: pointer; text-align: center;">
                            <i class="fas fa-money-bill-wave" style="font-size: 3rem; color: #f59e0b; margin-bottom: 15px; display: block;"></i>
                            <strong style="display: block; margin-bottom: 5px;">Financial Statement</strong>
                            <p style="color: var(--text-gray); font-size: 0.9rem;">Complete fee and payment history</p>
                        </div>
                        <div class="list-item" onclick="generateReport('combined')" style="cursor: pointer; text-align: center;">
                            <i class="fas fa-file-pdf" style="font-size: 3rem; color: #dc2626; margin-bottom: 15px; display: block;"></i>
                            <strong style="display: block; margin-bottom: 5px;">Combined Report</strong>
                            <p style="color: var(--text-gray); font-size: 0.9rem;">All-in-one comprehensive report</p>
                        </div>
                    </div>
                </div>
                
                <div class="chart-card" data-aos="fade-up" style="margin-top: 30px;">
                    <h3 class="chart-title">
                        <i class="fas fa-history"></i>
                        Recent Reports
                    </h3>
                    <table class="modern-table">
                        <thead>
                            <tr>
                                <th>Report Type</th>
                                <th>Child</th>
                                <th>Generated Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><i class="fas fa-chart-line" style="color: var(--primary);"></i> Progress Report</td>
                                <td>John Smith</td>
                                <td>Oct 1, 2025</td>
                                <td>
                                    <button class="btn-enhanced" style="background: #059669; color: white; padding: 8px 16px;" onclick="downloadReport(1)">
                                        <i class="fas fa-download"></i> Download
                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-calendar-check" style="color: #059669;"></i> Attendance Report</td>
                                <td>Sarah Smith</td>
                                <td>Sep 28, 2025</td>
                                <td>
                                    <button class="btn-enhanced" style="background: #059669; color: white; padding: 8px 16px;" onclick="downloadReport(2)">
                                        <i class="fas fa-download"></i> Download
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="js/modern-enhancements.js"></script>

    <script>
        // Static Parent Portal (No Backend Required)
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize parent portal with demo data
            initializeParentPortal();
        });

        function initializeParentPortal() {
            // Load dashboard data
            loadDashboardData();
            
            // Setup navigation
            setupNavigation();
            
            // Setup user dropdown
            setupUserDropdown();
        }

        function loadDashboardData() {
            // Load demo data (no backend required)
            const demoChildren = [
                {
                    id: 1,
                    name: 'John Doe',
                    class: 'Grade 5A',
                    admission_number: 'STU001',
                    attendance_percentage: 95
                },
                {
                    id: 2,
                    name: 'Jane Doe',
                    class: 'Grade 3B',
                    admission_number: 'STU002',
                    attendance_percentage: 88
                }
            ];
            
            updateChildrenList(demoChildren);
            
            // Load first child's data
            if (demoChildren.length > 0) {
                currentChildId = demoChildren[0].id;
                loadChildData(currentChildId);
            }
        }

        function loadChildData(childId) {
            // Load demo child data (no backend required)
            const demoProfile = {
                name: 'John Doe',
                class: 'Grade 5A',
                admission_number: 'STU001',
                attendance_percentage: 95,
                grade: 'A+'
            };
            
            const demoResults = [
                { subject: 'Mathematics', grade: 'A+', score: 95, max_score: 100 },
                { subject: 'English', grade: 'A', score: 88, max_score: 100 },
                { subject: 'Science', grade: 'A+', score: 92, max_score: 100 }
            ];
            
            const demoAttendance = {
                present: 18,
                absent: 2,
                total: 20,
                percentage: 90
            };
            
            const demoFees = [
                { description: 'Tuition Fee', amount: 500, due_date: '2024-01-15', status: 'paid' },
                { description: 'Library Fee', amount: 50, due_date: '2024-01-20', status: 'pending' }
            ];
            
            const demoAssignments = [
                { title: 'Math Homework', subject: 'Mathematics', due_date: '2024-01-15', status: 'completed' },
                { title: 'Science Project', subject: 'Science', due_date: '2024-01-20', status: 'pending' }
            ];

            updateChildProfile(demoProfile);
            updateAttendance(demoAttendance);
            updateResults(demoResults);
            updateFees(demoFees);
            updateAssignments(demoAssignments);
        }

        function updateChildrenList(children) {
            const childrenList = document.querySelector('.children-list');
            if (!childrenList) return;

            childrenList.innerHTML = children.map(child => `
                <div class="child-card" onclick="selectChild(${child.id}, '${child.first_name} ${child.last_name}', '${child.class_name || 'N/A'}')">
                    <div class="child-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="child-info">
                        <h4>${child.first_name} ${child.last_name}</h4>
                        <p>Class: ${child.class_name || 'N/A'}</p>
                        <p>Admission: ${child.admission_number || 'N/A'}</p>
                    </div>
                </div>
            `).join('');
        }

        function updateChildProfile(profile) {
            // Update profile information
            const profileElements = {
                'child-name': `${profile.first_name} ${profile.last_name}`,
                'admission-number': profile.admission_number || 'N/A',
                'class': profile.class_name || 'N/A',
                'grade': profile.grade || 'N/A',
                'attendance': `${profile.attendance_percentage || 0}%`
            };

            Object.entries(profileElements).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                }
            });
        }

        function updateAttendance(attendance) {
            const tbody = document.querySelector('#attendance-section tbody');
            if (!tbody) return;

            tbody.innerHTML = attendance.map(record => `
                <tr>
                    <td>${record.date || 'N/A'}</td>
                    <td>${record.subject || 'N/A'}</td>
                    <td>
                        <span class="attendance-badge ${record.status || 'present'}">${record.status || 'Present'}</span>
                    </td>
                    <td>${record.notes || 'N/A'}</td>
                </tr>
            `).join('');
        }

        function updateResults(results) {
            const tbody = document.querySelector('#results-section tbody');
            if (!tbody) return;

            tbody.innerHTML = results.map(result => `
                <tr>
                    <td><strong>${result.subject || 'N/A'}</strong></td>
                    <td>${result.exam_type || 'N/A'}</td>
                    <td>${result.score || 'N/A'}</td>
                    <td>${result.grade || 'N/A'}</td>
                    <td>${result.rank || 'N/A'}</td>
                    <td>
                        <span class="grade-badge ${result.grade_class || 'average'}">${result.grade || 'N/A'}</span>
                    </td>
                </tr>
            `).join('');
        }

        function updateFees(fees) {
            const tbody = document.querySelector('#fees-section tbody');
            if (!tbody) return;

            tbody.innerHTML = fees.map(fee => `
                <tr>
                    <td>${fee.fee_type || 'N/A'}</td>
                    <td>${fee.amount || 'N/A'}</td>
                    <td>${fee.due_date || 'N/A'}</td>
                    <td>
                        <span class="status-badge ${fee.status || 'pending'}">${fee.status || 'Pending'}</span>
                    </td>
                    <td>
                        ${fee.status === 'pending' ? `
                            <button class="btn-sm" onclick="payFee('${fee.id}')" style="background: #059669; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem;">
                                <i class="fas fa-credit-card"></i> Pay
                            </button>
                        ` : ''}
                    </td>
                </tr>
            `).join('');
        }

        function updateAssignments(assignments) {
            const tbody = document.querySelector('#assignments-section tbody');
            if (!tbody) return;

            tbody.innerHTML = assignments.map(assignment => `
                <tr>
                    <td><strong>${assignment.title || 'N/A'}</strong><br><small>${assignment.subject || 'N/A'}</small></td>
                    <td>${assignment.due_date || 'N/A'}</td>
                    <td>
                        <span class="status-badge ${assignment.status || 'pending'}">${assignment.status || 'Pending'}</span>
                    </td>
                    <td>${assignment.grade || 'N/A'}</td>
                    <td>
                        <button class="btn-sm" onclick="viewAssignment('${assignment.id}')" style="background: #3b82f6; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem;">
                            <i class="fas fa-eye"></i> View
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function setupUserDropdown() {
            const user = window.authService.getCurrentUser();
            if (user) {
                const userNameElement = document.querySelector('.user-name');
                if (userNameElement) {
                    userNameElement.textContent = `${user.first_name} ${user.last_name}`;
                }
            }
        }

        async function logout() {
            try {
                await window.authService.logout();
                Swal.fire({
                    title: 'Logged Out',
                    text: 'You have been successfully logged out.',
                    icon: 'success',
                    timer: 2000,
                    showConfirmButton: false
                }).then(() => {
                    window.location.href = '/login.html';
                });
            } catch (error) {
                console.error('Logout error:', error);
                window.authService.clearSession();
                window.location.href = '/login.html';
            }
        }

        function showError(message) {
            Swal.fire({
                title: 'Error',
                text: message,
                icon: 'error',
                confirmButtonText: 'OK'
            });
        }

        AOS.init({ duration: 800, once: true });

        let currentChildId = 1;

        async function selectChild(id, name, className) {
            currentChildId = id;
            document.querySelectorAll('.child-card').forEach(card => card.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            // Load data for selected child
            await loadChildData(id);
            
            Swal.fire({
                title: `Viewing ${name}`,
                text: className,
                icon: 'info',
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 2000
            });
            
            // Refresh data for selected child
            loadChildData(id);
        }

        function loadChildData(childId) {
            // API calls would go here
            console.log('Loading data for child:', childId);
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            document.querySelectorAll('.tab-content').forEach(c => c.style.display = 'none');
            document.getElementById(tabName + '-tab').style.display = 'block';
        }

        function showNotifications() {
            Swal.fire({
                title: 'üîî Notifications',
                html: `
                    <div style="text-align: left;">
                        <div style="padding: 15px; background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 8px; margin-bottom: 10px;">
                            <strong>Fee Payment Reminder</strong>
                            <p style="margin: 5px 0; color: #64748b;">Payment of KES 5,000 due in 3 days</p>
                        </div>
                        <div style="padding: 15px; background: #f0fdf4; border-left: 4px solid #059669; border-radius: 8px;">
                            <strong>Excellent Performance!</strong>
                            <p style="margin: 5px 0; color: #64748b;">John scored 92% in Science exam</p>
                        </div>
                    </div>
                `,
                showCloseButton: true,
                showConfirmButton: false
            });
        }

        function makePayment() {
            Swal.fire({
                title: 'Make Payment',
                html: `
                    <div style="text-align: left;">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Child</label>
                            <select class="swal2-input">
                                <option>John Smith - KES 10,000</option>
                                <option>Sarah Smith - KES 5,000</option>
                                <option>Both Children - KES 15,000</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Amount</label>
                            <input type="number" class="swal2-input" placeholder="Enter amount" value="15000">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Payment Method</label>
                            <select class="swal2-input">
                                <option>M-Pesa</option>
                                <option>Bank Transfer</option>
                                <option>Credit/Debit Card</option>
                            </select>
                        </div>
                    </div>
                `,
                confirmButtonText: '<i class="fas fa-lock"></i> Proceed to Payment',
                confirmButtonColor: '#10b981',
                showCancelButton: true
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        title: 'Processing...',
                        html: 'Please wait while we process your payment',
                        allowOutsideClick: false,
                        didOpen: () => {
                            Swal.showLoading();
                        }
                    });
                    
                    setTimeout(() => {
                        Swal.fire({
                            icon: 'success',
                            title: 'Payment Successful!',
                            html: 'Your payment of KES 15,000 has been processed<br><small>Receipt #RCP20251004001</small>',
                            confirmButtonColor: '#10b981'
                        });
                    }, 2000);
                }
            });
        }

        function composeMessage() {
            Swal.fire({
                title: 'Compose Message',
                html: `
                    <select class="swal2-input">
                        <option>Select Teacher</option>
                        <option>Mrs. Johnson (Mathematics)</option>
                        <option>Mr. Davis (Science)</option>
                        <option>Ms. Williams (English)</option>
                    </select>
                    <input type="text" class="swal2-input" placeholder="Subject">
                    <textarea class="swal2-textarea" placeholder="Type your message..."></textarea>
                `,
                confirmButtonText: 'Send Message',
                showCancelButton: true
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire('Sent!', 'Your message has been sent', 'success');
                }
            });
        }

        // Additional Functions
        function viewMessageDetail(msgId) {
            const messages = {
                1: {
                    from: 'Mrs. Johnson',
                    role: 'Mathematics Teacher',
                    about: 'John Smith',
                    subject: 'Excellent Progress in Mathematics',
                    message: 'Dear Parent,\n\nI wanted to inform you that John is showing excellent progress in mathematics. His recent exam score of 92% demonstrates his dedication and understanding of the subject matter.\n\nHe actively participates in class and consistently completes his assignments on time. Keep encouraging him!\n\nBest regards,\nMrs. Johnson',
                    date: '2 days ago'
                },
                2: {
                    from: 'Mr. Davis',
                    role: 'Science Teacher',
                    about: 'Sarah Smith',
                    subject: 'Outstanding Science Project',
                    message: 'Dear Parent,\n\nSarah\'s science project on plant growth was exceptional. She demonstrated great understanding of the scientific method and her presentation was well-organized.\n\nHer score of 95% reflects her hard work. Congratulations!\n\nBest regards,\nMr. Davis',
                    date: '5 days ago'
                }
            };
            
            const msg = messages[msgId];
            Swal.fire({
                title: msg.subject,
                html: `
                    <div style="text-align: left;">
                        <div style="background: var(--bg-light); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <div>
                                    <strong style="font-size: 1.1rem;">${msg.from}</strong>
                                    <div style="color: var(--text-gray); font-size: 0.9rem;">${msg.role}</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="color: var(--text-gray); font-size: 0.85rem;">${msg.date}</div>
                                    <div style="color: var(--primary); font-size: 0.85rem; font-weight: 600;">About: ${msg.about}</div>
                                </div>
                            </div>
                        </div>
                        <div style="white-space: pre-line; line-height: 1.8; color: var(--text-dark); padding: 15px; background: var(--bg-light); border-radius: 12px;">
                            ${msg.message}
                        </div>
                    </div>
                `,
                confirmButtonText: '<i class="fas fa-reply"></i> Reply',
                showCancelButton: true,
                cancelButtonText: 'Close',
                confirmButtonColor: '#10b981',
                width: 700
            }).then((result) => {
                if (result.isConfirmed) {
                    composeMessage(msg.from);
                }
            });
        }

        function requestMeeting() {
            Swal.fire({
                title: 'Request Parent-Teacher Meeting',
                html: `
                    <div style="text-align: left;">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Select Teacher</label>
                            <select class="swal2-input" id="meetingTeacher">
                                <option value="">Choose a teacher</option>
                                <option>Mrs. Johnson (Mathematics - John)</option>
                                <option>Mr. Davis (Science - Sarah)</option>
                                <option>Ms. Williams (English - John)</option>
                                <option>Mrs. Brown (Geography - Sarah)</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Preferred Date</label>
                            <input type="date" class="swal2-input" id="meetingDate">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Preferred Time</label>
                            <input type="time" class="swal2-input" id="meetingTime">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Meeting Type</label>
                            <select class="swal2-input" id="meetingType">
                                <option>In-Person</option>
                                <option>Video Call</option>
                                <option>Phone Call</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Purpose</label>
                            <textarea class="swal2-textarea" id="meetingPurpose" placeholder="Briefly describe the purpose of the meeting..."></textarea>
                        </div>
                    </div>
                `,
                confirmButtonText: '<i class="fas fa-calendar-check"></i> Request Meeting',
                showCancelButton: true,
                confirmButtonColor: '#10b981',
                width: 650,
                preConfirm: () => {
                    const teacher = document.getElementById('meetingTeacher').value;
                    const date = document.getElementById('meetingDate').value;
                    const purpose = document.getElementById('meetingPurpose').value;
                    
                    if (!teacher || !date || !purpose) {
                        Swal.showValidationMessage('Please fill all required fields');
                        return false;
                    }
                    return true;
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Meeting Request Sent! üìÖ',
                        html: 'Your meeting request has been sent to the teacher.<br><small>You will receive a confirmation shortly.</small>',
                        confirmButtonColor: '#059669'
                    });
                }
            });
        }

        function viewTeachers() {
            Swal.fire({
                title: 'Children\'s Teachers',
                html: `
                    <div style="text-align: left;">
                        <h4 style="color: #667eea; margin-bottom: 15px;">John Smith - STD 8A Teachers</h4>
                        <div class="modern-list">
                            <div class="list-item" style="margin-bottom: 10px;">
                                <div style="display: flex; align-items: center; gap: 15px;">
                                    <div style="width: 50px; height: 50px; background: #667eea; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600;">MJ</div>
                                    <div>
                                        <strong>Mrs. Johnson</strong>
                                        <p style="color: var(--text-gray); margin: 3px 0;">Mathematics Teacher</p>
                                        <small>üìß m.johnson@ks.ac.ke | üìû +254 700 111 222</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <h4 style="color: #10b981; margin: 25px 0 15px;">Sarah Smith - STD 6B Teachers</h4>
                        <div class="modern-list">
                            <div class="list-item">
                                <div style="display: flex; align-items: center; gap: 15px;">
                                    <div style="width: 50px; height: 50px; background: #10b981; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600;">MD</div>
                                    <div>
                                        <strong>Mr. Davis</strong>
                                        <p style="color: var(--text-gray); margin: 3px 0;">Science Teacher</p>
                                        <small>üìß r.davis@ks.ac.ke | üìû +254 700 333 444</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                showCloseButton: true,
                showConfirmButton: false,
                width: 700
            });
        }

        function generateReport(type) {
            const reportTitles = {
                progress: 'Progress Report',
                attendance: 'Attendance Report',
                financial: 'Financial Statement',
                combined: 'Combined Report'
            };
            
            Swal.fire({
                title: `Generate ${reportTitles[type]}`,
                html: `
                    <div style="text-align: left;">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Select Child</label>
                            <select class="swal2-input">
                                <option>John Smith</option>
                                <option>Sarah Smith</option>
                                <option>Both Children</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Report Period</label>
                            <select class="swal2-input">
                                <option>This Term</option>
                                <option>Last Term</option>
                                <option>This Year</option>
                                <option>Custom Date Range</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Format</label>
                            <select class="swal2-input">
                                <option>PDF</option>
                                <option>Excel</option>
                                <option>Email to me</option>
                            </select>
                        </div>
                    </div>
                `,
                confirmButtonText: '<i class="fas fa-file-download"></i> Generate Report',
                showCancelButton: true,
                confirmButtonColor: '#10b981'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        title: 'Generating Report...',
                        html: 'Please wait while we generate your report',
                        allowOutsideClick: false,
                        didOpen: () => {
                            Swal.showLoading();
                        }
                    });
                    
                    setTimeout(() => {
                        Swal.fire({
                            icon: 'success',
                            title: 'Report Generated! üìÑ',
                            html: `Your ${reportTitles[type]} has been generated successfully.<br><button class="btn-enhanced" style="background: #10b981; color: white; margin-top: 15px;" onclick="window.print()">Download PDF</button>`,
                            confirmButtonColor: '#059669'
                        });
                    }, 2000);
                }
            });
        }

        function downloadReport(id) {
            Swal.fire({
                title: 'Downloading Report...',
                toast: true,
                position: 'top-end',
                icon: 'info',
                showConfirmButton: false,
                timer: 1500
            });
        }

        // Initialize Charts
        document.addEventListener('DOMContentLoaded', function() {
            // Child Comparison Chart
            new Chart(document.getElementById('childComparisonChart'), {
                type: 'line',
                data: {
                    labels: ['Term 1', 'Term 2', 'Term 3'],
                    datasets: [{
                        label: 'John Smith',
                        data: [78, 82, 88],
                        borderColor: '#10b981',
                        tension: 0.4
                    }, {
                        label: 'Sarah Smith',
                        data: [75, 79, 83],
                        borderColor: '#0891b2',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom' } }
                }
            });

            // Attendance Chart
            new Chart(document.getElementById('attendanceOverviewChart'), {
                type: 'doughnut',
                data: {
                    labels: ['John - Present', 'John - Absent', 'Sarah - Present', 'Sarah - Absent'],
                    datasets: [{
                        data: [95, 5, 90, 10],
                        backgroundColor: ['#10b981', '#dc2626', '#0891b2', '#f59e0b']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            // Subject Performance
            new Chart(document.getElementById('subjectPerformanceChart'), {
                type: 'bar',
                data: {
                    labels: ['Math', 'English', 'Science', 'History'],
                    datasets: [{
                        label: 'Current Scores',
                        data: [85, 78, 92, 75],
                        backgroundColor: '#10b981'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            // Radar Chart
            new Chart(document.getElementById('radarChart'), {
                type: 'radar',
                data: {
                    labels: ['Academics', 'Attendance', 'Behavior', 'Participation', 'Homework'],
                    datasets: [{
                        label: 'Performance',
                        data: [88, 98, 95, 85, 90],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.2)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            // Payment History
            new Chart(document.getElementById('paymentHistoryChart'), {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Apr', 'Aug'],
                    datasets: [{
                        label: 'Payments (KES)',
                        data: [30000, 30000, 15000],
                        backgroundColor: '#10b981'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            // Attendance Comparison Chart
            setTimeout(() => {
                const attendanceComp = document.getElementById('attendanceComparisonChart');
                if (attendanceComp) {
                    new Chart(attendanceComp, {
                        type: 'line',
                        data: {
                            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                            datasets: [{
                                label: 'John Smith',
                                data: [100, 100, 100, 80],
                                borderColor: '#667eea',
                                backgroundColor: 'rgba(102, 126, 234, 0.1)',
                                tension: 0.4,
                                fill: true
                            }, {
                                label: 'Sarah Smith',
                                data: [100, 80, 100, 100],
                                borderColor: '#10b981',
                                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { position: 'bottom' }
                            },
                            scales: {
                                y: { beginAtZero: true, max: 100 }
                            }
                        }
                    });
                }
            }, 1000);
            
            // Welcome message
            setTimeout(() => {
                Swal.fire({
                    title: 'Welcome Back! üë®‚Äçüë©‚Äçüëß',
                    html: '<strong>John:</strong> 1 pending assignment, 98% attendance<br><strong>Sarah:</strong> All caught up! 95% attendance',
                    icon: 'info',
                    timer: 4000,
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timerProgressBar: true
                });
            }, 500);
        });
    </script>
</body>
</html>

